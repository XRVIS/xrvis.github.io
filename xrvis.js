(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{start:()=>h});var n={};e.r(n),e.d(n,{start:()=>S});var i={};e.r(i),e.d(i,{start:()=>O});var o,a={};e.r(a),e.d(a,{start:()=>N});var d=document.getElementById("video"),s=document.getElementById("output"),r=s.getContext("2d");const l={flipHorizontal:!1};async function h(){const e=handPoseDetection.SupportedModels.MediaPipeHands;o=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);d.srcObject=n,await new Promise((e=>{d.onloadedmetadata=()=>{e(d)}})),d.play();const i=d.videoWidth,a=d.videoHeight;d.width=i,d.height=a,s.width=i,s.height=a,r.translate(d.videoWidth,0),r.scale(-1,1),c()}async function c(){r.drawImage(d,0,0,d.videoWidth,d.videoHeight);try{!function(e){for(e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));e.length<2;)e.push({});for(let n=0;n<e.length;++n)null!=(t=e[n]).keypoints&&function(e,t){const n=e;r.fillStyle="Left"===t?"Red":"Blue",r.strokeStyle="white",r.lineWidth=2;for(let e=0;e<n.length;e++){var i=!1;for(let t=0;t<y.length;t++){const o=y[t];if(n[e].name.startsWith(o)){i=!0;break}}if(0!=i){var o=!1;for(let t=0;t<p.length;t++){const i=p[t];if(n[e].name.endsWith(i)){o=!0;break}}if(0!=o){if(n[e].name.endsWith("dip")){var a=n[e+1];1==!(n[e].y<a.y)?"Left"===t?(u.push(a),v(u,!1)):m(a):u.length>0&&(g.push(u),u=[])}w(n[e],3)}}}}(t.keypoints,t.handedness);var t;!function(){for(let e=0;e<g.length;e++)for(let t=0;t<g[e].length;t++)v(g[e],!1)}()}(await o.estimateHands(d,l))}catch(e){alert(e),console.log(e),o.dispose(),o=null}requestAnimationFrame(c)}var g=[],u=[];const y=["index"],p=["dip","tip"];var f;function v(e,t){const n=new Path2D;n.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++){const i=e[t];1!=i.erase&&n.lineTo(i.x,i.y)}t&&n.closePath(),r.stroke(n)}function m(e){for(let n=0;n<g.length;n++)for(let i=0;i<g[n].length;i++){var t=g[n][i];t.x>e.x-5&&t.y>e.y-5&&(t.erase=!0)}}function w(e,t){let n=e.x-2,i=e.y-2;r.beginPath(),r.arc(n,i,t,0,2*Math.PI),r.fill()}var x=document.getElementById("video"),P=document.getElementById("output"),H=P.getContext("2d");H.strokeStyle="Red",H.lineWidth=2;var M=document.getElementById("overlay");M&&(M.style.left=window.innerWidth/2+"px",M.style.top=window.innerHeight/4+"px");const W={flipHorizontal:!1};async function S(){const e=handPoseDetection.SupportedModels.MediaPipeHands;f=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);x.srcObject=n,await new Promise((e=>{x.onloadedmetadata=()=>{e(x)}})),x.play();const i=x.videoWidth,o=x.videoHeight;x.width=i,x.height=o,P.width=i,P.height=o,b()}let D;async function b(){H.clearRect(0,0,x.videoWidth,x.videoHeight),D=0;try{!function(e){e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));for(let n=0;n<e.length;++n)null!=(t=e[n]).keypoints&&function(e){const t=e.keypoints;var n=e.handedness,i=t[3],o=t[4];"Left"===n?i.x<o.x&&D++:i.x>o.x&&D++;for(let e=8;e<t.length;e+=4){var a=t[e-1];t[e].y<=a.y&&D++}}(t);var t}(await f.estimateHands(x,W))}catch(e){alert(e),console.log(e),f.dispose(),f=null}var e;I=D,console.log("sign: "+I),e=I,document.querySelector("#text").innerHTML=e,requestAnimationFrame(b)}var k,I=0,B=document.getElementById("video"),R=document.getElementById("output"),j=R.getContext("2d");j.strokeStyle="Red",j.lineWidth=2;var E=document.getElementById("overlay");E&&(E.style.left="200px",E.style.top="10px");const L={flipHorizontal:!1};async function O(){const e=handPoseDetection.SupportedModels.MediaPipeHands;k=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);B.srcObject=n,await new Promise((e=>{B.onloadedmetadata=()=>{e(B)}})),B.play();const i=B.videoWidth,o=B.videoHeight;B.width=i,B.height=o,R.width=i,R.height=o,j.translate(B.videoWidth,0),j.scale(-1,1),C()}async function C(){j.clearRect(0,0,B.videoWidth,B.videoHeight);try{!function(e){e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));for(let i=0;i<e.length;++i)null!=(n=e[i]).keypoints&&(function(e){j.fillStyle="Left"===e.handedness?"Red":"Blue";var t=e.keypoints;for(let e=0;e<t.length;e++)z(t[e],3)}(n),function(e){const t=e.keypoints;e.handedness,t[3],t[4];for(let e=8;e<20;e+=4){var n=t[e-1],i=t[e];if(0==!(i.y>n.y)){var o=-1;if(i.y>200&&i.y<255?o=0:i.y>335&&i.y<390?o=1:i.y>470&&i.y<535&&(o=2),o>-1){var a=~~((1080-i.x)/90);console.log(o+","+a),q=F[o][a]}}}}(n)),q&&q!=T&&(U+=T=q),t=void 0,console.log("text: "+U),t=U,document.querySelector("#text").innerHTML=t||"_";var t,n}(await k.estimateHands(B,L))}catch(e){alert(e),console.log(e),k.dispose(),k=null}requestAnimationFrame(C)}var T,q,A,F=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"," "],["Z","X","C","V","B","N","M"]],U="";function z(e,t){let n=e.x-2,i=e.y-2;j.beginPath(),j.arc(n,i,t,0,2*Math.PI),j.fill()}var _=document.getElementById("video"),$=document.getElementById("output"),G=$.getContext("2d");G.strokeStyle="Red",G.lineWidth=2;var J=document.getElementById("overlay");J&&(J.style.left="200px",J.style.top="10px");const K={flipHorizontal:!1};async function N(){const e=handPoseDetection.SupportedModels.MediaPipeHands;A=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);_.srcObject=n,await new Promise((e=>{_.onloadedmetadata=()=>{e(_)}})),_.play();const i=_.videoWidth,o=_.videoHeight;_.width=i,_.height=o,$.width=i,$.height=o,G.translate(_.videoWidth,0),G.scale(-1,1),Z()}var Q,V,X,Y=!1;async function Z(){G.clearRect(0,0,_.videoWidth,_.videoHeight);try{!function(e){e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0)),Q=0,X=void 0;for(let n=0;n<e.length;n++)null!=(t=e[n]).keypoints&&(function(e){G.fillStyle="Left"===e.handedness?"Red":"Blue";var t=e.keypoints;for(let e=0;e<t.length;e++)ee(t[e],3)}(t),function(e){const t=e.keypoints;var n=e.handedness,i=t[3],o=t[4];"Left"===n?(i.x,o.x,X=t[8]):i.x>o.x&&Q++;for(let e=8;e<t.length;e+=4){var a=t[e-1];t[e].y<=a.y&&"Left"!==n&&Q++}}(t));var t;if(e.length>1&&Q<2)if(Y)if(V&&X){var n=~~(V.x-X.x),i=~~(V.y-X.y);console.log(`${n}-${i}`);var o=map.getCenter();map.setCenter([o.lng-n/1e6,o.lat-i/1e6])}else console.log("0-0");else Y=!0,V=X;else Y=!1}(await A.estimateHands(_,K))}catch(e){alert(e),console.log(e),A.dispose(),A=null}requestAnimationFrame(Z)}function ee(e,t){let n=e.x-2,i=e.y-2;G.beginPath(),G.arc(n,i,t,0,2*Math.PI),G.fill()}window.xrdraw=t,window.xrsign=n,window.xrtype=i,window.xrnav=a})();