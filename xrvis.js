(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{start:()=>l});var n={};e.r(n),e.d(n,{start:()=>W});var i,o={};e.r(o),e.d(o,{start:()=>O});var a=document.getElementById("video"),d=document.getElementById("output"),s=d.getContext("2d");const r={flipHorizontal:!1};async function l(){const e=handPoseDetection.SupportedModels.MediaPipeHands;i=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);a.srcObject=n,await new Promise((e=>{a.onloadedmetadata=()=>{e(a)}})),a.play();const o=a.videoWidth,r=a.videoHeight;a.width=o,a.height=r,d.width=o,d.height=r,s.translate(a.videoWidth,0),s.scale(-1,1),h()}async function h(){s.drawImage(a,0,0,a.videoWidth,a.videoHeight);try{!function(e){for(e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));e.length<2;)e.push({});for(let n=0;n<e.length;++n)null!=(t=e[n]).keypoints&&function(e,t){const n=e;s.fillStyle="Left"===t?"Red":"Blue",s.strokeStyle="white",s.lineWidth=2;for(let e=0;e<n.length;e++){var i=!1;for(let t=0;t<g.length;t++){const o=g[t];if(n[e].name.startsWith(o)){i=!0;break}}if(0!=i){var o=!1;for(let t=0;t<y.length;t++){const i=y[t];if(n[e].name.endsWith(i)){o=!0;break}}if(0!=o){if(n[e].name.endsWith("dip")){var a=n[e+1];1==!(n[e].y<a.y)?"Left"===t?(u.push(a),f(u,!1)):v(a):u.length>0&&(c.push(u),u=[])}m(n[e],3)}}}}(t.keypoints,t.handedness);var t;!function(){for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)f(c[e],!1)}()}(await i.estimateHands(a,r))}catch(e){alert(e),console.log(e),i.dispose(),i=null}requestAnimationFrame(h)}var c=[],u=[];const g=["index"],y=["dip","tip"];var p;function f(e,t){const n=new Path2D;n.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++){const i=e[t];1!=i.erase&&n.lineTo(i.x,i.y)}t&&n.closePath(),s.stroke(n)}function v(e){for(let n=0;n<c.length;n++)for(let i=0;i<c[n].length;i++){var t=c[n][i];t.x>e.x-5&&t.y>e.y-5&&(t.erase=!0)}}function m(e,t){let n=e.x-2,i=e.y-2;s.beginPath(),s.arc(n,i,t,0,2*Math.PI),s.fill()}var w=document.getElementById("video"),P=document.getElementById("output"),x=P.getContext("2d");x.strokeStyle="Red",x.lineWidth=2;var H=document.getElementById("overlay");H&&(H.style.left=window.innerWidth/2+"px",H.style.top=window.innerHeight/4+"px");const M={flipHorizontal:!1};async function W(){const e=handPoseDetection.SupportedModels.MediaPipeHands;p=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);w.srcObject=n,await new Promise((e=>{w.onloadedmetadata=()=>{e(w)}})),w.play();const i=w.videoWidth,o=w.videoHeight;w.width=i,w.height=o,P.width=i,P.height=o,b()}let S;async function b(){x.clearRect(0,0,w.videoWidth,w.videoHeight),S=0;try{!function(e){e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));for(let n=0;n<e.length;++n)null!=(t=e[n]).keypoints&&function(e){const t=e.keypoints;var n=e.handedness,i=t[3],o=t[4];"Left"===n?i.x<o.x&&S++:i.x>o.x&&S++;for(let e=8;e<t.length;e+=4){var a=t[e-1];t[e].y<=a.y&&S++}}(t);var t}(await p.estimateHands(w,M))}catch(e){alert(e),console.log(e),p.dispose(),p=null}var e;k=S,console.log("sign: "+k),e=k,document.querySelector("#text").innerHTML=e,requestAnimationFrame(b)}var D,k=0,I=document.getElementById("video"),B=document.getElementById("output"),j=B.getContext("2d");j.strokeStyle="Red",j.lineWidth=2;var R=document.getElementById("overlay");R&&(R.style.left="200px",R.style.top="10px");const E={flipHorizontal:!1};async function O(){const e=handPoseDetection.SupportedModels.MediaPipeHands;D=await handPoseDetection.createDetector(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands"});const t={audio:!1,video:{facingMode:"user",width:window.innerWidth,height:window.innerHeight,frameRate:{ideal:60}}},n=await navigator.mediaDevices.getUserMedia(t);I.srcObject=n,await new Promise((e=>{I.onloadedmetadata=()=>{e(I)}})),I.play();const i=I.videoWidth,o=I.videoHeight;I.width=i,I.height=o,B.width=i,B.height=o,j.translate(I.videoWidth,0),j.scale(-1,1),L()}async function L(){j.clearRect(0,0,I.videoWidth,I.videoHeight);try{!function(e){e.sort(((e,t)=>e.handedness<t.handedness?1:e.handedness>t.handedness?-1:0));for(let i=0;i<e.length;++i)null!=(n=e[i]).keypoints&&(function(e){j.fillStyle="Left"===e.handedness?"Red":"Blue";var t=e.keypoints;for(let e=0;e<t.length;e++)F(t[e],3)}(n),function(e){const t=e.keypoints;e.handedness,t[3],t[4];for(let e=8;e<20;e+=4){var n=t[e-1],i=t[e];if(0==!(i.y>n.y)){var o=-1;if(i.y>200&&i.y<255?o=0:i.y>335&&i.y<390?o=1:i.y>470&&i.y<535&&(o=2),o>-1){var a=~~((1080-i.x)/90);console.log(o+","+a),q=A[o][a]}}}}(n)),q&&q!=T&&(C+=T=q),t=void 0,console.log("text: "+C),t=C,document.querySelector("#text").innerHTML=t||"_";var t,n}(await D.estimateHands(I,E))}catch(e){alert(e),console.log(e),D.dispose(),D=null}requestAnimationFrame(L)}var T,q,A=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"," "],["Z","X","C","V","B","N","M"]],C="";function F(e,t){let n=e.x-2,i=e.y-2;j.beginPath(),j.arc(n,i,t,0,2*Math.PI),j.fill()}window.xrdraw=t,window.xrsign=n,window.xrtype=o})();
